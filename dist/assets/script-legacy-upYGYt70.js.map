{"version":3,"file":"script-legacy-upYGYt70.js","sources":["../../script.js"],"sourcesContent":["// Square Inches to Square Feet Converter JavaScript\r\n\r\nclass SquareConverter {\r\n    constructor() {\r\n        this.inputField = document.getElementById('square-inches');\r\n        this.resultMain = document.getElementById('result-main');\r\n        this.resultDetail = document.getElementById('result-detail');\r\n        this.convertBtn = document.getElementById('convert-btn');\r\n        this.clearBtn = document.getElementById('clear-btn');\r\n\r\n        this.initializeEventListeners();\r\n    }\r\n\r\n    initializeEventListeners() {\r\n        // Convert button click (optional button)\r\n        if (this.convertBtn) {\r\n            this.convertBtn.addEventListener('click', () => this.convert());\r\n        }\r\n\r\n        // Clear button click\r\n        if (this.clearBtn) {\r\n            this.clearBtn.addEventListener('click', () => this.clear());\r\n        }\r\n\r\n        // Enter key press\r\n        this.inputField.addEventListener('keypress', (e) => {\r\n            if (e.key === 'Enter') {\r\n                this.convert();\r\n            }\r\n        });\r\n\r\n        // Real-time conversion as user types\r\n        this.inputField.addEventListener('input', () => {\r\n            const value = this.inputField.value.trim();\r\n\r\n            // Validate input\r\n            validateInput(this.inputField, {\r\n                min: 0,\r\n                max: 1000000,\r\n                required: false,\r\n                customMessage: 'Please enter a valid number or fraction'\r\n            });\r\n\r\n            if (value) {\r\n                this.convert();\r\n            }\r\n        });\r\n    }\r\n\r\n    parseInput(inputStr) {\r\n        inputStr = inputStr.trim();\r\n\r\n        if (!inputStr) {\r\n            return null;\r\n        }\r\n\r\n        // Remove extra spaces\r\n        inputStr = inputStr.replace(/\\s+/g, ' ');\r\n\r\n        // Try mixed number pattern first (e.g., \"144 1/2\")\r\n        const mixedPattern = /^(\\d+(?:\\.\\d+)?)\\s+(\\d+)\\/(\\d+)$/;\r\n        const mixedMatch = inputStr.match(mixedPattern);\r\n        if (mixedMatch) {\r\n            const wholePart = parseFloat(mixedMatch[1]);\r\n            const numerator = parseInt(mixedMatch[2]);\r\n            const denominator = parseInt(mixedMatch[3]);\r\n            return wholePart + (numerator / denominator);\r\n        }\r\n\r\n        // Try simple fraction pattern (e.g., \"1/2\", \"289/2\")\r\n        const fractionPattern = /^(\\d+)\\/(\\d+)$/;\r\n        const fractionMatch = inputStr.match(fractionPattern);\r\n        if (fractionMatch) {\r\n            const numerator = parseInt(fractionMatch[1]);\r\n            const denominator = parseInt(fractionMatch[2]);\r\n            if (denominator === 0) return null;\r\n            return numerator / denominator;\r\n        }\r\n\r\n        // Try decimal pattern (e.g., \"144.5\", \"144.25\")\r\n        const decimalPattern = /^(\\d+(?:\\.\\d+)?)$/;\r\n        const decimalMatch = inputStr.match(decimalPattern);\r\n        if (decimalMatch) {\r\n            return parseFloat(decimalMatch[1]);\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    convert() {\r\n        const inputStr = this.inputField.value;\r\n\r\n        if (!inputStr.trim()) {\r\n            this.showError(\"Please enter square inches to convert.\");\r\n            return;\r\n        }\r\n\r\n        const squareInches = this.parseInput(inputStr);\r\n\r\n        if (squareInches === null) {\r\n            this.showError(\"Please enter a valid number or fraction.\");\r\n            return;\r\n        }\r\n\r\n        if (squareInches < 0) {\r\n            this.showError(\"Square inches cannot be negative.\");\r\n            return;\r\n        }\r\n\r\n        // Convert to square feet (1 square foot = 144 square inches)\r\n        const squareFeet = squareInches / 144;\r\n\r\n        // Format the result\r\n        let resultText;\r\n        if (squareFeet === Math.floor(squareFeet)) {\r\n            resultText = `${Math.floor(squareFeet)} ft²`;\r\n        } else {\r\n            resultText = `${squareFeet.toFixed(4)} ft²`;\r\n        }\r\n\r\n        const detailText = `${squareFeet.toFixed(6)} square feet`;\r\n\r\n        this.resultMain.textContent = resultText;\r\n        this.resultDetail.textContent = detailText;\r\n\r\n        // Let CSS control colors\r\n\r\n        // Track conversion for analytics (if needed)\r\n        this.trackConversion(squareInches, squareFeet);\r\n    }\r\n\r\n    clear() {\r\n        this.inputField.value = '';\r\n        this.resultMain.textContent = '0 ft²';\r\n        this.resultDetail.textContent = 'Enter square inches above to convert';\r\n        // Let CSS define colors\r\n        this.resultMain.style.color = '';\r\n        this.resultDetail.style.color = '';\r\n        this.inputField.focus();\r\n    }\r\n\r\n    showError(message) {\r\n        this.resultMain.textContent = 'Error';\r\n        this.resultDetail.textContent = message;\r\n        this.resultMain.style.color = '#dc3545';\r\n        this.resultDetail.style.color = '#dc3545';\r\n\r\n        // Do not auto-clear; keep message visible until user action\r\n    }\r\n\r\n    trackConversion(squareInches, squareFeet) {\r\n        // Google Analytics event tracking (if GA is set up)\r\n        if (typeof gtag !== 'undefined') {\r\n            gtag('event', 'conversion', {\r\n                event_category: 'Calculator',\r\n                event_label: 'Square Inches to Feet',\r\n                value: Math.round(squareInches)\r\n            });\r\n        }\r\n\r\n        // You can add other analytics tracking here\r\n        console.log(`Converted ${squareInches} sq in to ${squareFeet.toFixed(4)} sq ft`);\r\n    }\r\n}\r\n\r\n// Common conversion examples for SEO and user help\r\nconst commonConversions = {\r\n    144: 1,\r\n    288: 2,\r\n    432: 3,\r\n    576: 4,\r\n    720: 5,\r\n    864: 6,\r\n    1008: 7,\r\n    1152: 8,\r\n    1296: 9,\r\n    1440: 10\r\n};\r\n\r\n// Utility functions for additional features\r\nfunction getCommonConversion(squareInches) {\r\n    return commonConversions[squareInches] || null;\r\n}\r\n\r\nfunction generateRandomExample() {\r\n    const examples = ['144', '288', '144.5', '144 1/2', '289/2', '576', '720.25', '432 3/4'];\r\n    return examples[Math.floor(Math.random() * examples.length)];\r\n}\r\n\r\n// Add example functionality\r\nfunction addExampleFeature() {\r\n    const helpText = document.querySelector('.help-text');\r\n    if (helpText) {\r\n        helpText.addEventListener('click', () => {\r\n            const example = generateRandomExample();\r\n            document.getElementById('square-inches').value = example;\r\n            converter.convert();\r\n        });\r\n        helpText.style.cursor = 'pointer';\r\n        helpText.title = 'Click for a random example';\r\n    }\r\n}\r\n\r\n// Mobile Navigation Toggle\r\nclass MobileNav {\r\n    constructor() {\r\n        this.navToggle = document.getElementById('nav-toggle');\r\n        this.navMenu = document.querySelector('.nav-menu');\r\n\r\n        if (this.navToggle && this.navMenu) {\r\n            this.initializeEventListeners();\r\n        }\r\n    }\r\n\r\n    initializeEventListeners() {\r\n        this.navToggle.addEventListener('click', () => {\r\n            this.toggleMenu();\r\n        });\r\n\r\n        // Close menu when clicking outside\r\n        document.addEventListener('click', (e) => {\r\n            if (!this.navToggle.contains(e.target) && !this.navMenu.contains(e.target)) {\r\n                this.closeMenu();\r\n            }\r\n        });\r\n\r\n        // Close menu when clicking on nav links (mobile), but keep it open for dropdown toggles or placeholder links\r\n        this.navMenu.querySelectorAll('.nav-link').forEach(link => {\r\n            link.addEventListener('click', (e) => {\r\n                if (window.innerWidth <= 768) {\r\n                    const href = (link.getAttribute('href') || '').trim();\r\n                    const isDropdownToggle = link.classList.contains('dropdown-toggle');\r\n                    const isPlaceholder = href === '' || href === '#';\r\n                    if (isDropdownToggle || isPlaceholder) {\r\n                        e.preventDefault();\r\n                        return; // Do not close menu\r\n                    }\r\n                    this.closeMenu();\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    toggleMenu() {\r\n        this.navMenu.classList.toggle('active');\r\n        this.navToggle.classList.toggle('active');\r\n\r\n        // Prevent body scroll when menu is open\r\n        if (this.navMenu.classList.contains('active')) {\r\n            document.body.style.overflow = 'hidden';\r\n        } else {\r\n            document.body.style.overflow = '';\r\n        }\r\n    }\r\n\r\n    closeMenu() {\r\n        this.navMenu.classList.remove('active');\r\n        this.navToggle.classList.remove('active');\r\n        document.body.style.overflow = '';\r\n    }\r\n}\r\n\r\n// Dynamic Header Scroll Effect\r\nclass DynamicHeader {\r\n    constructor() {\r\n        this.header = document.querySelector('.main-nav');\r\n        this.scrollThreshold = 50;\r\n\r\n        if (this.header) {\r\n            this.initializeScrollListener();\r\n        }\r\n    }\r\n\r\n    initializeScrollListener() {\r\n        let ticking = false;\r\n\r\n        const updateHeader = () => {\r\n            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\r\n\r\n            if (scrollTop > this.scrollThreshold) {\r\n                this.header.classList.add('scrolled');\r\n            } else {\r\n                this.header.classList.remove('scrolled');\r\n            }\r\n\r\n            ticking = false;\r\n        };\r\n\r\n        const requestTick = () => {\r\n            if (!ticking) {\r\n                requestAnimationFrame(updateHeader);\r\n                ticking = true;\r\n            }\r\n        };\r\n\r\n        window.addEventListener('scroll', requestTick);\r\n\r\n        // Initial check\r\n        updateHeader();\r\n    }\r\n}\r\n\r\n// Initialize the converter when page loads\r\nlet converter;\r\nlet mobileNav;\r\nlet dynamicHeader;\r\n\r\n// Error handling utility\r\nconst safeExecute = (fn, context = 'Unknown') => {\r\n    try {\r\n        return fn();\r\n    } catch (error) {\r\n        console.error(`Error in ${context}:`, error);\r\n        return null;\r\n    }\r\n};\r\n\r\n// Form validation utility\r\nconst validateInput = (input, options = {}) => {\r\n    const {\r\n        min = 0,\r\n        max = Infinity,\r\n        required = false,\r\n        type = 'number',\r\n        customMessage = null\r\n    } = options;\r\n\r\n    const value = type === 'number' ? parseFloat(input.value) : input.value;\r\n    const wrapper = input.closest('.input-wrapper');\r\n    let messageEl = wrapper?.querySelector('.validation-message');\r\n\r\n    // Create message element if it doesn't exist\r\n    if (!messageEl) {\r\n        messageEl = document.createElement('div');\r\n        messageEl.className = 'validation-message';\r\n        wrapper?.appendChild(messageEl);\r\n    }\r\n\r\n    // Clear previous states\r\n    input.classList.remove('error', 'valid');\r\n    messageEl.className = 'validation-message';\r\n\r\n    // Check if empty and required\r\n    if (required && (!input.value || input.value.trim() === '')) {\r\n        input.classList.add('error');\r\n        messageEl.classList.add('error');\r\n        messageEl.textContent = customMessage || 'This field is required';\r\n        return false;\r\n    }\r\n\r\n    // Skip validation if empty and not required\r\n    if (!input.value || input.value.trim() === '') {\r\n        return true;\r\n    }\r\n\r\n    // Type-specific validation\r\n    if (type === 'number') {\r\n        if (isNaN(value)) {\r\n            input.classList.add('error');\r\n            messageEl.classList.add('error');\r\n            messageEl.textContent = customMessage || 'Please enter a valid number';\r\n            return false;\r\n        }\r\n\r\n        if (value < min) {\r\n            input.classList.add('error');\r\n            messageEl.classList.add('error');\r\n            messageEl.textContent = customMessage || `Value must be at least ${min}`;\r\n            return false;\r\n        }\r\n\r\n        if (value > max) {\r\n            input.classList.add('error');\r\n            messageEl.classList.add('error');\r\n            messageEl.textContent = customMessage || `Value must be no more than ${max}`;\r\n            return false;\r\n        }\r\n    }\r\n\r\n    // Valid input\r\n    input.classList.add('valid');\r\n    messageEl.classList.add('success');\r\n    messageEl.textContent = '✓ Valid';\r\n    return true;\r\n};\r\n\r\n// Immediate fallback: show content if JavaScript is working\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    // Show content immediately on DOM ready as fallback\r\n    const docEl = document.documentElement;\r\n    if (!docEl.classList.contains('page-ready')) {\r\n        docEl.classList.add('page-ready');\r\n    }\r\n\r\n    // Instantiate converter only on pages that have the input\r\n    const squareInchesInput = document.getElementById('square-inches');\r\n    if (squareInchesInput) {\r\n        safeExecute(() => {\r\n            converter = new SquareConverter();\r\n            addExampleFeature();\r\n            squareInchesInput.focus();\r\n        }, 'SquareConverter initialization');\r\n    }\r\n\r\n    // Global UI inits with error handling\r\n    safeExecute(() => {\r\n        mobileNav = new MobileNav();\r\n    }, 'MobileNav initialization');\r\n\r\n    safeExecute(() => {\r\n        dynamicHeader = new DynamicHeader();\r\n    }, 'DynamicHeader initialization');\r\n\r\n    // Attach animation classes (Animate.css and Hover.css)\r\n    try {\r\n        const isCoarse = window.matchMedia('(pointer: coarse)').matches;\r\n        const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;\r\n\r\n        document.querySelectorAll('.calculator-card').forEach(el => {\r\n            el.classList.add('animate__animated', 'animate__fadeInUp');\r\n        });\r\n        document.querySelectorAll('.content-section article').forEach(el => {\r\n            el.classList.add('animate__animated', 'animate__fadeInUp');\r\n        });\r\n        document.querySelectorAll('.faq-section').forEach(el => {\r\n            el.classList.add('animate__animated', 'animate__fadeInUp');\r\n        });\r\n        // Do not animate title on every load; handled by AOS once via sessionStorage\r\n\r\n        // Helper to trigger a brief animate.css effect on tap/click\r\n        const addTapAnimation = (elements, animation) => {\r\n            elements.forEach(el => {\r\n                const trigger = () => {\r\n                    if (prefersReduced) return;\r\n                    el.classList.add('animate__animated', animation);\r\n                    const handleEnd = () => {\r\n                        el.classList.remove('animate__animated', animation);\r\n                        el.removeEventListener('animationend', handleEnd);\r\n                    };\r\n                    el.addEventListener('animationend', handleEnd, { once: true });\r\n                };\r\n                el.addEventListener('touchstart', trigger, { passive: true });\r\n                el.addEventListener('click', trigger);\r\n            });\r\n        };\r\n\r\n        const buttons = document.querySelectorAll('.convert-btn, .clear-btn');\r\n        const pills = document.querySelectorAll('.calculator-nav a, .preset-btn');\r\n        const navLinks = document.querySelectorAll('.nav-link');\r\n\r\n        if (isCoarse) {\r\n            // Mobile/touch: tap-friendly pulse/subtle scale\r\n            addTapAnimation(buttons, 'animate__pulse');\r\n            // Do not animate pills on tap; only on first page load via AOS\r\n        } else {\r\n            // Desktop: disable mouse-over animation classes\r\n        }\r\n    } catch (e) {\r\n        // Non-fatal if libraries are missing\r\n    }\r\n\r\n    // Inject Font Awesome icons into calculator pills based on destination (force consistent icons)\r\n    const ensurePillIcons = () => {\r\n        try {\r\n            const pillIconForHref = (href) => {\r\n                if (!href) return 'fa-circle-dot';\r\n                const h = href.toLowerCase();\r\n                if (h.includes('index')) return 'fa-ruler-combined';\r\n                if (h.includes('tile')) return 'fa-border-all';\r\n                if (h.includes('carpet')) return 'fa-couch';\r\n                if (h.includes('hardwood')) return 'fa-tree';\r\n                if (h.includes('baseboard')) return 'fa-ruler';\r\n                if (h.includes('subfloor')) return 'fa-hammer';\r\n                return 'fa-circle-dot';\r\n            };\r\n            document.querySelectorAll('.calculator-nav a').forEach(a => {\r\n                // remove any existing leading icon\r\n                if (a.firstElementChild && a.firstElementChild.tagName === 'I') {\r\n                    a.removeChild(a.firstElementChild);\r\n                }\r\n                const icon = pillIconForHref(a.getAttribute('href') || '');\r\n                a.innerHTML = `<i class=\"fa-solid ${icon}\"></i> ` + a.innerHTML;\r\n            });\r\n        } catch (e) {}\r\n    };\r\n    ensurePillIcons();\r\n    window.addEventListener('load', ensurePillIcons);\r\n\r\n    // Hybrid PJAX navigation for calculator pills + page-ready fade\r\n    try {\r\n        const docEl = document.documentElement;\r\n\r\n        // Ensure content is visible - add fallback timeout\r\n        const showContent = () => {\r\n            docEl.classList.add('page-ready');\r\n        };\r\n\r\n        // Defer reveal until load for smoother first paint\r\n        window.addEventListener('load', showContent);\r\n\r\n        // Fallback: show content after 2 seconds even if load event doesn't fire\r\n        setTimeout(showContent, 2000);\r\n\r\n        const normalizeUrl = (u) => {\r\n            try { return new URL(u, window.location.href).href; } catch { return u; }\r\n        };\r\n\r\n        const loadedScriptSrcs = new Set(\r\n            Array.from(document.querySelectorAll('script[src]')).map(s => normalizeUrl(s.getAttribute('src')))\r\n        );\r\n\r\n        const loadExternalScriptsSequentially = async (scripts) => {\r\n            for (const src of scripts) {\r\n                if (loadedScriptSrcs.has(src)) continue;\r\n                await new Promise((resolve, reject) => {\r\n                    const s = document.createElement('script');\r\n                    s.src = src;\r\n                    s.async = false;\r\n                    s.onload = () => { loadedScriptSrcs.add(src); resolve(); };\r\n                    s.onerror = reject;\r\n                    document.head.appendChild(s);\r\n                });\r\n            }\r\n        };\r\n\r\n        const executeInlineScripts = (container) => {\r\n            container.querySelectorAll('script:not([src])').forEach(old => {\r\n                const code = old.textContent || '';\r\n                if (!code.trim()) return;\r\n                // Avoid rerunning AdSense snippets\r\n                if (code.includes('adsbygoogle')) return;\r\n                const s = document.createElement('script');\r\n                s.textContent = code;\r\n                document.body.appendChild(s);\r\n                // Cleanup optional\r\n                setTimeout(() => s.remove(), 0);\r\n            });\r\n        };\r\n\r\n        const reInitNewContent = () => {\r\n            // Re-run icon injection for new pills\r\n            try { ensurePillIcons(); } catch (e) {}\r\n\r\n            // Re-init AOS on new nodes\r\n            try {\r\n                document.querySelectorAll('.calculator-card').forEach(el => el.setAttribute('data-aos', 'fade-up'));\r\n                document.querySelectorAll('.content-section article').forEach(el => el.setAttribute('data-aos', 'fade-up'));\r\n                document.querySelectorAll('.faq-section').forEach(el => el.setAttribute('data-aos', 'fade-up'));\r\n                if (window.AOS && typeof window.AOS.refresh === 'function') {\r\n                    // Use refresh instead of init for PJAX navigation\r\n                    window.AOS.refresh();\r\n                } else if (window.AOS && typeof window.AOS.init === 'function') {\r\n                    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;\r\n                    window.AOS.init({\r\n                        duration: 300,\r\n                        once: true,\r\n                        easing: 'cubic-bezier(0.22, 1, 0.36, 1)',\r\n                        offset: 60,\r\n                        mirror: false,\r\n                        disable: () => prefersReduced\r\n                    });\r\n                }\r\n            } catch (e) {\r\n                console.log('AOS refresh failed:', e);\r\n            }\r\n\r\n            // Re-init converter if present\r\n            try {\r\n                const squareInchesInput = document.getElementById('square-inches');\r\n                if (squareInchesInput) {\r\n                    // reset global converter ref\r\n                    converter = new SquareConverter();\r\n                    addExampleFeature();\r\n                } else {\r\n                    converter = undefined;\r\n                }\r\n            } catch (e) {}\r\n\r\n            // Re-attach smooth scroll for anchors inside new main\r\n            try {\r\n                document.querySelectorAll('a[href^=\"#\"]').forEach(anchor => {\r\n                    anchor.addEventListener('click', function (e) {\r\n                        const href = this.getAttribute('href');\r\n                        if (!href || href === '#') return;\r\n                        e.preventDefault();\r\n                        const target = document.querySelector(href);\r\n                        if (target) {\r\n                            target.scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n                        }\r\n                    });\r\n                });\r\n            } catch (e) {}\r\n\r\n            // Ensure copy buttons exist and are wired\r\n            try { initCopyButtons(); } catch (e) {}\r\n        };\r\n\r\n        const pjaxSwap = async (url, pushState = true) => {\r\n            const mainEl = document.querySelector('main');\r\n            if (!mainEl) { window.location.href = url; return; }\r\n            try {\r\n                const res = await fetch(url, { credentials: 'same-origin' });\r\n                if (!res.ok) throw new Error('HTTP ' + res.status);\r\n                const html = await res.text();\r\n                const parser = new DOMParser();\r\n                const doc = parser.parseFromString(html, 'text/html');\r\n                const newMain = doc.querySelector('main');\r\n                if (!newMain) throw new Error('No main in response');\r\n\r\n                // Update title\r\n                if (doc.title) document.title = doc.title;\r\n\r\n                // Load any external scripts not yet present (from the fetched document)\r\n                const srcs = Array.from(doc.querySelectorAll('script[src]'))\r\n                    .map(s => normalizeUrl(s.getAttribute('src')));\r\n                await loadExternalScriptsSequentially(srcs);\r\n\r\n                // After content is ready, fade out current, then swap, then fade in\r\n                const performSwap = () => {\r\n                    // Swap content while hidden\r\n                    mainEl.innerHTML = newMain.innerHTML;\r\n                    // Execute inline scripts from the new main only\r\n                    executeInlineScripts(mainEl);\r\n                    // Scroll to top and re-init UI behavior\r\n                    window.scrollTo({ top: 0, behavior: 'instant' in window ? 'instant' : 'auto' });\r\n                    reInitNewContent();\r\n                    // Rebind PJAX links in the new content\r\n                    try {\r\n                        document.querySelectorAll('.calculator-nav a').forEach(link => {\r\n                            link.addEventListener('click', (e) => {\r\n                                const href = link.getAttribute('href');\r\n                                if (!href || href.startsWith('#')) return;\r\n                                if (e.metaKey || e.ctrlKey || e.shiftKey || e.altKey || link.target === '_blank') return;\r\n                                e.preventDefault();\r\n                                const dest = normalizeUrl(href);\r\n                                if (dest === normalizeUrl(window.location.href)) return;\r\n                                pjaxSwap(dest, true);\r\n                            });\r\n                        });\r\n                    } catch (_) {}\r\n\r\n                    // Prefetch likely next pages (new set)\r\n                    try {\r\n                        const prefetchPills = () => {\r\n                            document.querySelectorAll('.calculator-nav a').forEach(a => {\r\n                                const href = a.getAttribute('href');\r\n                                if (!href || href.startsWith('#')) return;\r\n                                const l = document.createElement('link');\r\n                                l.rel = 'prefetch';\r\n                                l.href = href;\r\n                                document.head.appendChild(l);\r\n                            });\r\n                        };\r\n                        (window.requestIdleCallback ? window.requestIdleCallback(prefetchPills) : setTimeout(prefetchPills, 400));\r\n                    } catch (_) {}\r\n\r\n                    if (pushState) window.history.pushState({ pjax: true }, '', url);\r\n                    // Reveal next frame for a clean fade-in\r\n                    requestAnimationFrame(() => mainEl.classList.remove('fade-hidden'));\r\n                };\r\n\r\n                // Trigger fade-out, then swap on transition end\r\n                const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;\r\n                if (prefersReduced) {\r\n                    performSwap();\r\n                } else {\r\n                    let swapped = false;\r\n                    const handleEnd = () => {\r\n                        if (swapped) return;\r\n                        swapped = true;\r\n                        mainEl.removeEventListener('transitionend', handleEnd);\r\n                        performSwap();\r\n                    };\r\n                    mainEl.addEventListener('transitionend', handleEnd, { once: true });\r\n                    // Fallback in case transitionend doesn’t fire\r\n                    setTimeout(handleEnd, 200);\r\n                    // Start fade-out\r\n                    // Ensure a frame so the transition applies\r\n                    requestAnimationFrame(() => mainEl.classList.add('fade-hidden'));\r\n                }\r\n            } catch (err) {\r\n                // Fallback to hard navigation\r\n                window.location.href = url;\r\n                return;\r\n            }\r\n        };\r\n\r\n        const bindPjaxLinks = () => {\r\n            document.querySelectorAll('.calculator-nav a').forEach(link => {\r\n                link.addEventListener('click', (e) => {\r\n                    const href = link.getAttribute('href');\r\n                    if (!href || href.startsWith('#')) return;\r\n                    // Allow new tab/window\r\n                    if (e.metaKey || e.ctrlKey || e.shiftKey || e.altKey || link.target === '_blank') return;\r\n                    e.preventDefault();\r\n                    const dest = normalizeUrl(href);\r\n                    if (dest === normalizeUrl(window.location.href)) return;\r\n                    pjaxSwap(dest, true);\r\n                });\r\n            });\r\n        };\r\n\r\n        bindPjaxLinks();\r\n        // Prefetch pill targets on idle to minimize fetch delay\r\n        try {\r\n            const prefetchPills = () => {\r\n                document.querySelectorAll('.calculator-nav a').forEach(a => {\r\n                    const href = a.getAttribute('href');\r\n                    if (!href || href.startsWith('#')) return;\r\n                    const l = document.createElement('link');\r\n                    l.rel = 'prefetch';\r\n                    l.href = href;\r\n                    document.head.appendChild(l);\r\n                });\r\n            };\r\n            (window.requestIdleCallback ? window.requestIdleCallback(prefetchPills) : setTimeout(prefetchPills, 500));\r\n        } catch (_) {}\r\n        window.addEventListener('popstate', () => {\r\n            pjaxSwap(window.location.href, false);\r\n        });\r\n    } catch (e) {}\r\n\r\n    // Add AOS attributes then init (if library present)\r\n    const initAOS = () => {\r\n        try {\r\n            // Check if AOS is disabled via URL parameter or localStorage\r\n            const urlParams = new URLSearchParams(window.location.search);\r\n            const disableAOS = urlParams.get('disable-aos') === 'true' ||\r\n                              localStorage.getItem('disableAOS') === 'true';\r\n\r\n            if (disableAOS) {\r\n                console.log('AOS disabled by user preference');\r\n                return;\r\n            }\r\n\r\n            // Check if AOS is available and not already initialized\r\n            if (!window.AOS || typeof window.AOS.init !== 'function') {\r\n                console.log('AOS library not available, skipping animations');\r\n                return;\r\n            }\r\n\r\n            // First-load only animations for title/pills (persist across pages in session)\r\n            const hasAnimatedIntro = sessionStorage.getItem('introAnimated') === 'true';\r\n            if (!hasAnimatedIntro) {\r\n                const titleEl = document.querySelector('.page-title');\r\n                if (titleEl) titleEl.setAttribute('data-aos', 'fade-down');\r\n                const pillsEl = document.querySelector('.calculator-nav');\r\n                if (pillsEl) pillsEl.setAttribute('data-aos', 'fade-down');\r\n                // Mark after AOS finishes first run\r\n                document.addEventListener('aos:in', () => {\r\n                    sessionStorage.setItem('introAnimated', 'true');\r\n                }, { once: true });\r\n            }\r\n\r\n            // Always animate body content below pills on load\r\n            document.querySelectorAll('.calculator-card').forEach(el => el.setAttribute('data-aos', 'fade-up'));\r\n            document.querySelectorAll('.content-section article').forEach(el => el.setAttribute('data-aos', 'fade-up'));\r\n            document.querySelectorAll('.faq-section').forEach(el => el.setAttribute('data-aos', 'fade-up'));\r\n\r\n            const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;\r\n            window.AOS.init({\r\n                duration: 300,\r\n                once: true,\r\n                easing: 'cubic-bezier(0.22, 1, 0.36, 1)',\r\n                offset: 60,\r\n                mirror: false,\r\n                disable: () => prefersReduced\r\n            });\r\n        } catch (e) {\r\n            console.log('AOS initialization failed:', e);\r\n        }\r\n    };\r\n\r\n    // Try to initialize AOS immediately, then retry after a delay if it fails\r\n    initAOS();\r\n\r\n    // Fallback: retry AOS initialization after a delay\r\n    setTimeout(() => {\r\n        if (!window.AOS || !window.AOS.refresh) {\r\n            initAOS();\r\n        }\r\n    }, 1000);\r\n\r\n    // Add global function to disable AOS if needed\r\n    window.disableAOS = () => {\r\n        localStorage.setItem('disableAOS', 'true');\r\n        console.log('AOS disabled. Refresh the page to apply changes.');\r\n    };\r\n\r\n    // Add smooth scrolling for any internal links\r\n    document.querySelectorAll('a[href^=\"#\"]').forEach(anchor => {\r\n        anchor.addEventListener('click', function (e) {\r\n            const href = this.getAttribute('href');\r\n            if (!href || href === '#') return;\r\n            e.preventDefault();\r\n            const target = document.querySelector(href);\r\n            if (target) {\r\n                target.scrollIntoView({\r\n                    behavior: 'smooth',\r\n                    block: 'start'\r\n                });\r\n            }\r\n        });\r\n    });\r\n\r\n    // Wire copy button on initial load as well\r\n    try { initCopyButtons(); } catch (e) {}\r\n\r\n    // Footer year\r\n    try {\r\n        const yearEls = document.querySelectorAll('.js-current-year');\r\n        const y = new Date().getFullYear();\r\n        yearEls.forEach(el => { el.textContent = y; });\r\n    } catch (e) {}\r\n});\r\n\r\n// Service Worker for PWA capabilities (optional)\r\nif ('serviceWorker' in navigator) {\r\n    window.addEventListener('load', () => {\r\n        navigator.serviceWorker.register('/sq2ft-calculators/sw.js')\r\n            .then(registration => {\r\n                console.log('SW registered: ', registration);\r\n            })\r\n            .catch(registrationError => {\r\n                console.log('SW registration failed: ', registrationError);\r\n            });\r\n    });\r\n}\r\n\r\n// Add keyboard shortcuts\r\ndocument.addEventListener('keydown', (e) => {\r\n    // Ctrl/Cmd + Enter to convert\r\n    if ((e.ctrlKey || e.metaKey) && e.key === 'Enter' && converter) {\r\n        e.preventDefault();\r\n        converter.convert();\r\n    }\r\n\r\n    // Escape to clear\r\n    if (e.key === 'Escape' && converter) {\r\n        e.preventDefault();\r\n        converter.clear();\r\n    }\r\n});\r\n\r\n// Export for testing or external use\r\nif (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = SquareConverter;\r\n}\r\n\r\n// Copy-to-clipboard setup\r\nfunction initCopyButtons() {\r\n    // 1) Primary calculator (single result)\r\n    document.querySelectorAll('.result-display').forEach(container => {\r\n        let btn = container.querySelector('.copy-btn');\r\n        if (!btn) {\r\n            btn = document.createElement('button');\r\n            btn.className = 'copy-btn';\r\n            btn.type = 'button';\r\n            btn.innerHTML = '<i class=\"fa-solid fa-copy\" style=\"margin-right:6px\"></i>Copy';\r\n            container.appendChild(btn);\r\n        }\r\n        const resultMain = container.querySelector('#result-main') || document.getElementById('result-main');\r\n        const resultDetail = container.querySelector('#result-detail') || document.getElementById('result-detail');\r\n        const copyText = () => {\r\n            const text = resultMain && resultMain.textContent ? resultMain.textContent.trim() : '';\r\n            if (!text) return;\r\n            const detail = (resultDetail && resultDetail.textContent) ? resultDetail.textContent.trim() : '';\r\n            const isPlaceholder = /enter\\s+square\\s+inches\\s+above\\s+to\\s+convert/i.test(detail);\r\n            const toCopy = isPlaceholder || !detail ? text : `${text} — ${detail}`;\r\n            copyToClipboard(btn, toCopy);\r\n        };\r\n        btn.onclick = copyText;\r\n    });\r\n\r\n    // 2) Results grid (multiple items)\r\n    document.querySelectorAll('.results-grid .result-item').forEach(item => {\r\n        // Avoid duplicating button\r\n        if (item.querySelector('.copy-btn')) return;\r\n        const valueEl = item.querySelector('.result-value') || item.querySelector('strong, b, span');\r\n        if (!valueEl) return;\r\n        const btn = document.createElement('button');\r\n        btn.className = 'copy-btn';\r\n        btn.type = 'button';\r\n        btn.style.marginTop = '0.5rem';\r\n        btn.innerHTML = '<i class=\"fa-solid fa-copy\" style=\"margin-right:6px\"></i>Copy';\r\n        item.appendChild(btn);\r\n        btn.onclick = () => {\r\n            const label = item.querySelector('.result-label')?.textContent?.trim();\r\n            const value = valueEl.textContent?.trim() || '';\r\n            const text = label ? `${label}: ${value}` : value;\r\n            if (!text) return;\r\n            copyToClipboard(btn, text);\r\n        };\r\n    });\r\n\r\n    // 3) Copy All for calculators with results-grid (exclude index page with #square-inches)\r\n    const isIndex = !!document.getElementById('square-inches');\r\n    const resultsGrid = document.querySelector('.results-grid');\r\n    if (!isIndex && resultsGrid) {\r\n        // Place Copy All under the section header if not present\r\n        const resultSection = resultsGrid.closest('.result-section');\r\n        if (resultSection && !resultSection.querySelector('.copy-all-btn')) {\r\n            const copyAllBtn = document.createElement('button');\r\n            copyAllBtn.className = 'copy-all-btn';\r\n            copyAllBtn.type = 'button';\r\n            copyAllBtn.style.marginTop = '0.6rem';\r\n            copyAllBtn.innerHTML = '<i class=\"fa-solid fa-clipboard-list\" style=\"margin-right:6px\"></i>Copy All';\r\n            // Insert after header if present, else at end of section before grid\r\n            const header = resultSection.querySelector('.result-header');\r\n            if (header && header.nextSibling) {\r\n                header.parentNode.insertBefore(copyAllBtn, header.nextSibling);\r\n            } else {\r\n                resultSection.insertBefore(copyAllBtn, resultsGrid);\r\n            }\r\n            copyAllBtn.onclick = () => {\r\n                const lines = [];\r\n                resultsGrid.querySelectorAll('.result-item').forEach(item => {\r\n                    const label = item.querySelector('.result-label')?.textContent?.trim();\r\n                    const value = item.querySelector('.result-value, strong, b, span')?.textContent?.trim();\r\n                    if (!value) return;\r\n                    lines.push(label ? `${label}: ${value}` : value);\r\n                });\r\n                const text = lines.join('\\n');\r\n                if (!text) return;\r\n                copyToClipboard(copyAllBtn, text);\r\n            };\r\n        }\r\n    }\r\n}\r\n\r\nfunction copyToClipboard(btn, text) {\r\n    navigator.clipboard.writeText(text).then(() => {\r\n        btn.classList.add('copied');\r\n        const prev = btn.innerHTML;\r\n        btn.innerHTML = '<i class=\"fa-solid fa-check\" style=\"margin-right:6px\"></i>Copied';\r\n        setTimeout(() => { btn.classList.remove('copied'); btn.innerHTML = prev; }, 1200);\r\n    }).catch(() => {\r\n        const ta = document.createElement('textarea');\r\n        ta.value = text;\r\n        ta.style.position = 'fixed';\r\n        ta.style.opacity = '0';\r\n        document.body.appendChild(ta);\r\n        ta.select();\r\n        try { document.execCommand('copy'); } catch (_) {}\r\n        document.body.removeChild(ta);\r\n        btn.classList.add('copied');\r\n        const prev = btn.innerHTML;\r\n        btn.innerHTML = '<i class=\"fa-solid fa-check\" style=\"margin-right:6px\"></i>Copied';\r\n        setTimeout(() => { btn.classList.remove('copied'); btn.innerHTML = prev; }, 1200);\r\n    });\r\n}\r\n"],"names":["SquareConverter","constructor","this","inputField","document","getElementById","resultMain","resultDetail","convertBtn","clearBtn","initializeEventListeners","addEventListener","convert","clear","e","key","value","trim","validateInput","min","max","required","customMessage","parseInput","inputStr","mixedMatch","replace","match","parseFloat","parseInt","fractionMatch","numerator","denominator","decimalMatch","showError","squareInches","squareFeet","resultText","Math","floor","toFixed","detailText","textContent","trackConversion","style","color","focus","message","gtag","event_category","event_label","round","console","log","addExampleFeature","helpText","querySelector","example","examples","random","length","generateRandomExample","converter","cursor","title","MobileNav","navToggle","navMenu","toggleMenu","contains","target","closeMenu","querySelectorAll","forEach","link","window","innerWidth","href","getAttribute","classList","preventDefault","toggle","body","overflow","remove","DynamicHeader","header","scrollThreshold","initializeScrollListener","ticking","updateHeader","pageYOffset","documentElement","scrollTop","add","requestTick","requestAnimationFrame","mobileNav","dynamicHeader","safeExecute","fn","context","error","input","options","Infinity","type","wrapper","closest","messageEl","createElement","className","appendChild","isNaN","initCopyButtons","container","btn","innerHTML","onclick","copyText","text","detail","isPlaceholder","test","copyToClipboard","item","valueEl","marginTop","label","isIndex","resultsGrid","resultSection","copyAllBtn","nextSibling","parentNode","insertBefore","lines","push","join","navigator","clipboard","writeText","then","prev","setTimeout","catch","ta","position","opacity","select","execCommand","_","removeChild","docEl","squareInchesInput","isCoarse","matchMedia","matches","prefersReduced","el","addTapAnimation","elements","animation","trigger","handleEnd","removeEventListener","once","passive","buttons","ensurePillIcons","pillIconForHref","h","toLowerCase","includes","a","firstElementChild","tagName","icon","showContent","normalizeUrl","u","URL","location","loadedScriptSrcs","Set","Array","from","map","s","loadExternalScriptsSequentially","async","src","scripts","has","Promise","resolve","reject","onload","onerror","head","executeInlineScripts","old","code","reInitNewContent","setAttribute","AOS","refresh","init","duration","easing","offset","mirror","disable","undefined","anchor","scrollIntoView","behavior","block","pjaxSwap","url","pushState","mainEl","res","fetch","credentials","ok","Error","status","html","doc","DOMParser","parseFromString","newMain","srcs","performSwap","scrollTo","top","startsWith","metaKey","ctrlKey","shiftKey","altKey","dest","prefetchPills","l","rel","requestIdleCallback","history","pjax","swapped","err","initAOS","urlParams","URLSearchParams","search","get","localStorage","getItem","sessionStorage","titleEl","pillsEl","setItem","disableAOS","yearEls","y","Date","getFullYear","serviceWorker","register","registration","registrationError","module","exports"],"mappings":"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"}